<link rel="import" href="table-cart.html">
<dom-module id="part-cart-order-items">
  <template>
    <div class="panel">
      <div class="table-responsive">
        <table-cart order_items="{{cart}}" on-remove-product="on_remove_product"
          on-change-quantity="on_change_quantity">
        </table-cart>
      </div>
      <div class="total">
        <strong class="label">Total</strong>
        <span>{{total}}</span>
      </div>
    </div>
  </template>

</dom-module>
<script>
  Polymer({

    is: 'part-cart-order-items',

    properties: {
      cart: {
        type: Array,
        value: function () { return []; }
      }
    },

    on_remove_product: function (event)Â {
      event.stopPropagation();
      var order_item = event.detail;
      var index = this.cart.indexOf(order_item);
      this.splice('cart', index, 1);
      this.fire('update-cart');
    },

    on_change_quantity: function (event) {
      event.stopPropagation();
      var order_item = event.detail.order_item;
      var index = this.cart.indexOf(order_item);
      console.log(order_item, event.detail.new_quantity);
      this.cart[index].quantity = event.detail.new_quantity;
      this.fire('update-cart');
    }

  });
</script>