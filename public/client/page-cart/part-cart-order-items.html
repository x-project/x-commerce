<link rel="import" href="../style-panel/style-panel.html">
<link rel="import" href="part-cart-order-item.html">
<dom-module id="part-cart-order-items">
  <template>
    <style include="style-panel"></style>

    <div class="panel">
      <template id="order_item" is="dom-repeat" items="{{cart}}" as="order_item">
        <part-cart-order-item order-item="{{order_item}}" on-remove-product="on_remove_product"
          on-change-quantity="on_change_quantity"></part-cart-order-item>
      </template>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-cart-order-items',

    properties: {
      cart: {
        type: Array,
        value: function () { return []; }
      }
    },

    on_remove_product: function (event)Â {
      event.stopPropagation();
      var order_item = this.$.order_item.itemForElement(event.target);
      var index = this.cart.indexOf(order_item);
      this.splice('cart', index, 1);
      this.fire('update-cart');
    },

    on_change_quantity: function (event) {
      event.stopPropagation();
      var order_item = event.detail.order_item;
      order_item.quantity = event.detail.quantity;
      this.fire('update-cart');
    }

  });
</script>