<link rel="import" href="../../styles/style-deck/style-deck.html">
<link rel="import" href="../../styles/style-card/style-card.html">
<link rel="import" href="../input-rating/input-rating.html">

<dom-module id="deck-products">
  <template>
    <style include="style-deck"></style>
    <style include="style-card"></style>

    <div class="deck">
      <template is="dom-repeat" items="{{products}}" as="product">
        <div class="card">
          <image-preview class="card-img-top img-responsive" image="{{product.images.0}}"
            sizing="contain" like-size="120"
            height="100" width="100">
          </image-preview>
          <div class="card-block">
            <h4 class="card-title">{{product.title}} {{product.price}} $</h4>
            <input-rating value="{{_get_average_rating(product)}}"></input-rating>
          </div>
          <div class="card-block">
            <a href="/products/{{product.id}}" class="card-link">view</a>
          </div>
        </div>
      </template>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'deck-products',

    properties: {
      products: {
        type: Array,
        value: function () { return []; }
      }
    },

    _get_average_rating: function (product) {
      return product.score_review / product.total_review;
    }

  });
</script>