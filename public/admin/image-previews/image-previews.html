<link rel="import" href="../../components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../components/layout-grid/layout-grid.html">
<dom-module id="image-previews">
  <template>
    <style>
      :host{
        display: block
      }
      .image {
        margin: auto;
        background-position: center center;
        background-repeat: no-repeat;
        background-size: 100%;
        -webkit-transition: background-size;
        transition: background-size;
        -webkit-transition-duration: 1s;
        transition-duration: 1s;
      }
      .image:hover {
        background-size: 120%;
      }
    </style>

    <div class="image" style$="{{style}}"></div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'image-previews',

    properties: {
      images: {
        type: Array,
        value: function () { return []; }
      },
      likeSize: {
        type: Number
      },
      host_name: {
        type: String,
        value: 'http://localhost:3000/'
      },
      height: {
        type: Number
      },
      width: {
        type: Number
      },
      size: {
        type: String
      }
    },

    attached: function () {
      var url = '';
      console.log("ciao");
      // if (this.exists_thumb()) {
      //   this.view_one_image();
      //   return;
      // }
      // search small size
      // this.search_near_thumb_size();
      // this.view_one_image();
    },


    view_one_image: function () {
      url = this.get_url()
      var rules = [
        'background-image: url("' + url + '")',
        'height: '+ this.height + 'px',
        'width: ' + this.width + '%'
      ];
      this.style = rules.join(';');
    },

    get_url: function () {
      var tmp = this.image[0].base_url.replace('public/', '');
      return this.host_name + tmp + '/thumb-' + this.likeSize + this.image[0].extension;
    }

  });
</script>