<link rel="import" href="table-items.html">
<link rel="import" href="part-product-pages.html">
<dom-module id="search-option">
  <template>
    <style include="style-form"></style>
    <style include="style-panel"></style>
    <style>
      input {
        box-sizing: border-box;
      }
    </style>

    <input class="form-control" type="text" is="iron-input" bind-value="{{value}}"
      on-keyup="on_change_value" on-focus="on_change_value"/>

    <div class="panel">
    <h2 class="title">Items</h2>
      <table-items items="{{items}}"></table-items>
      <part-product-pages on-change-page="on_change_page" perpage="{{perpage}}"
        count="{{count}}">
      </part-product-pages>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'search-option',

    properties: {
      value: {
        type: String,
        value: '',
        notify: true
      },
      items: {
        type: Array,
        value: function () { return []; }
      },
      count: {
        type: Number
      },
      perpage: {
        type: Number
      }
    },

    attached: function () {
      if (!this.items) {
        this.items = [];
        return;
      }
    },

    on_change_value: function (event) {
      event.stopPropagation();
      this.fire('change-value');
    },

    on_change_page: function (event) {
      event.stopPropagation();
      var page = event.detail.current;
      this.fire('change-page', page);
    }

  });
</script>