<link rel="import" href="part-order-item.html">
<dom-module id="part-order-items">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>

		<h2>Order items</h2>


    <iron-ajax id="ajax_get_order_items" method="GET" url="{{url_order_items}}"
      handle-as="json" last-response="{{orders}}" on-response="on_response">
    </iron-ajax>


		<div class="items">
			<template is="dom-repeat" items="{{orders}}">
			<div class="item">
				quantity <span>{{item.quantity}}</span>
			</div>
			</template>
		</div>

	</template>
</dom-module>
<script>
	Polymer({

		is: 'part-order-items',

		properties: {
			order: {
				type: Object,
				value: function () { return {}; }
			},
			items: {
				type: Array,
				value: function () { return []; }
			},
			orders: {
				type: Array,
				value: function () { return []; }
			}
		},

		attached: function () {
			if(this.is_new_model()){
				return;
			}
			this.url_order_items = '/api/Orders/' + this.order.id + '/order_items'
			this.$.ajax_get_order_items.generateRequest();
		},

		on_response: function () {
			// console.log(this.order_items);
		},

    is_new_model: function ()Â {
      if(Object.keys(this.order).length === 0)
        return true;
      return false;
    }

	});
</script>