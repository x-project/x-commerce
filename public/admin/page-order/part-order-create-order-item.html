<link rel="import" href="../style-panel/style-panel.html">
<link rel="import" href="form-order-item.html">
<dom-module id="part-order-create-order-item">
  <template>
    <style include="style-panel">
      .form_search_product {
        display: none;
      }
      .form_search_product[show]Â {
        display: block;
      }
    </style>

    <button id="btn_add_order_item" class="button"
      on-click="on_click_add_order_item">add order item</button>
    <form-order-item class="form_search_product" show$="{{show}}" order="{{order}}"
      on-try-save-order-item="on_try_save_order_item">
    </form-order-item>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-order-create-order-item',

    properties: {
      order: {
        type: Object,
        value: function () { return {}; }
      },
      show: {
        type: Boolean,
        value: false
      },
      orders: {
        type: Array,
        notify: true,
        value: function () { return []; }
      }
    },

    on_click_add_order_item: function (event) {
      event.stopPropagation();
      this.$.btn_add_order_item.disabled = 'disabled';
      this.show_form();
    },

    show_form: function () {
      this.set('show', true);
    },

    hide_form: function () {
      this.set('show', false);
    },

    on_try_save_order_item: function (event) {
      //lascio passare l event con order item, prodotto e variante selezionata
      this.hide_form();
      this.$.btn_add_order_item.disabled = '';
    }

  });
</script>