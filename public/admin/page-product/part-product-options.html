<link rel="import" href="../style-panel/style-panel.html">
<link rel="import" href="form-product-options.html">
<dom-module id="part-product-options">
	<template>
	  <style include="style-panel"></style>
    <style>
      #form {
        display: none;
      }
      #form[open] {
        display: block;
      }
    </style>

    <div class="panel">
			<h2 class="title">Options</h2>

      <template is="dom-repeat" items="{{list_option}}">
      <div>
        <span>{{item.name}}</span>
        <span>{{item.values}}</span>

      </div>
      </template>


      <button on-click="on_click_add">add option</button>

			<form-product-options id="form" open$="{{open}}"
        on-try-save="on_try_save" option="{{options}}">
      </form-product-options>

		</div>
	</template>
</dom-module>
<script>
	Polymer({

		is: 'part-product-options',

    properties: {
      options: {
        type: Object,
        value: function () { return {}; }
      },
      open: {
        type: Boolean,
        value: false
      },
      list_option:Â {
        type: Array,
        value: function () { return []; }
      }
    },

    on_click_add: function (event) {
      this.open_form();
    },

    open_form: function (event) {
      this.set('open', true);
      this.set('options', {});
    },

    close_form: function (event) {
      this.set('open', false);
      this.set('options', {});
    },

    on_try_save: function (event) {
      this.options.values = this.options.values.split(' ');
      // TODO: ajax
      console.log(this.options.name);
      this.push('list_option', this.options);
      this.close_form();
    }

	});
</script>